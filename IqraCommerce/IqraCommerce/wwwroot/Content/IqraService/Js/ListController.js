ListController=Controller=new function(){function t(n){function f(){var n=$(this).closest("tr").data("model");r.Add.Open(n)}function e(){var e=$(this).closest("tr").data("model"),n=u(),r,f;n=n.substring(0,n.length-1);option=t.remove||{};for(r in option)option[r.toLowerCase()]=option[r];e.IsDeleted||(f={name:t.name,data:{Id:e.Id},onsavesuccess:function(){i.Reload()}},Global.Copy(f,option,!0),Global.Controller.Call({url:IqraConfig.Url.Js.WarningController,functionName:"Show",options:f}))}function o(n){this.IsDeleted&&n.addClass("removed").find(".btn_delete").addClass("disabled");t.grid.rowbound&&t.grid.rowbound.call(this,n)}function u(){var n=t.name+(t.name[t.name.length-1]=="s"?"":"s");return n.replace(/[A-Z]/g,function(n){return" "+n})}var r=this,i,t;this.Reload=function(){i.Reload()},function(n){function f(n){return Global.Copy({title:{items:n.pagger&&n.pagger.items||IqraConfig.Grid.Pagger.PageSize,selected:n.page.PageSize||IqraConfig.Grid.Pagger.Selected,showingInfo:n.page.showingInfo||n.pagger&&n.pagger.showingInfo||"Showing {0} to {1}  of {2}  "+u()},items:n.actions,className:"action"},n.action||{})}var r=n.Grid=this;r.Bind=function(n){var r;Global.Grid.Bind(r=Global.Copy(Global.Copy({},n,!0),{elm:n.elm||$("#"+t.name.toLowerCase()+"_table_container"),url:n.url||"/"+t.name+"s/Get",Action:f(n),dataBinding:function(t){n.ondatabinding&&n.ondatabinding(t)},rowBound:o,oncomplete:function(n){i=n;console.log(["gridModel",i]);t.oncomplete&&t.oncomplete(n)}},!0));console.log(["Global.Grid.Bind",r])}}(this);this.Add=new function(){function n(n){var r={name:t.name,columns:i.selector&&i.selector.columns||i.columns,model:n,onSaveSuccess:function(r){i.Reload();var u;u=n&&t.edit?t.edit.onsavesuccess||t.edit.onsuccess||(t.add?t.add.onsavesuccess||t.add.onsuccess:""):(t.add?t.add.onsavesuccess||t.add.onsuccess:"")||(t.edit?t.edit.onsavesuccess||t.edit.onsuccess:"");u&&u(r)}};t.edit&&Global.Copy(r,t.edit||{},!0);t.add&&Global.Copy(r,t.add||{},!0);Global.Add(r)}var u=this;this.Open=function(t){n(t)};this.Bind=function(){t.add!=!1&&(t.add=t.add||{},t.add.elm=t.add.elm||$("#btn_add_new_"+r.Name.toLowerCase()),t.add.elm.length==0&&(t.add.elm=$("#btn_add_new")),t.add.elm.click(function(){n()}))}},function(n){var i;for(i in n)n[i.toLowerCase()]=n[i];n.grid=n.grid||{};for(i in n.grid)n.grid[i.toLowerCase()]=n.grid[i];return t=n,r.Name=t.name,t.grid=t.grid||{},t.grid.page=t.grid.page||{PageNumber:1,PageSize:10},t.grid.actions=t.grid.actions||[],t.edit!=!1&&t.grid.actions.push({click:f,html:'<span class="icon_container"><span class="glyphicon glyphicon-edit"><\/span><\/span>'}),t.remove!=!1&&t.grid.actions.push({click:e,html:'<span class="icon_container" style="margin-left: 5px;"><span class="glyphicon glyphicon-trash"><\/span><\/span>'}),r.Grid.Bind(t.grid),r.Add.Bind(),r}(n)}var n=this;n.Bind=function(n){return new t(n)}}